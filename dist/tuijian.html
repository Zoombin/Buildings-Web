<!doctype html><html><head><meta charset="UTF-8"><title>&#x63A8;&#x8350;</title><meta content="yes" name="apple-mobile-web-app-capable"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0"><link href="css/bootstrap.css" rel="stylesheet" type="text/css"><link href="css/test.css" rel="stylesheet" type="text/css"><link href="css/theme.css?_=111" rel="stylesheet" type="text/css"></head><body style="background-color:#fff;"><div class="container-fluid "><form class="tuijian" id="formTuijian"><div class="input-group"><span class="input-group-addon text-orange"><img src="img/icon_name.png" class="img-input">&#x5BA2;&#x6237;&#x59D3;&#x540D; |</span><input type="text" class="form-control" aria-label="" placeholder="&#x5FC5; &#x586B; &#x9879;" name="clientName" id="clientName" max-length="20"><span class="input-group-addon"><a href="XCFCAddress:900950.com"><img src="img/icon_book.png" class="img-input1"></a></span></div><div id="clientName_error" class="text-danger text-center " style="display:none;"></div><div class="input-group"><span class="input-group-addon text-orange"><img src="img/icon_phone.png" class="img-input">&#x624B;&#x673A;&#x53F7;&#x7801; |</span><input class="form-control" aria-label="" placeholder="&#x5FC5; &#x586B; &#x9879;" name="clientPhone" id="clientPhone"><span class="input-group-addon">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;</span></div><div id="clientPhone_error" class="text-danger text-center " style="display:none;"></div><div class="input-group border-green"><span class="input-group-addon text-green"><img src="img/icon_city.png" class="img-input">&#x610F;&#x5411;&#x57CE;&#x5E02; |</span> <span id="recommendCity" class="form-control color-999" style="line-height:24px;">&#x5FC5; &#x586B; &#x9879;</span><div id="citySelect" class="citySelect" style="display:none;"><div class="border-bottom border-top row p10 "><div class="col-xs-6 text-left" id="cancelCity"><div class="pl10">&#x53D6;&#x6D88;</div></div><div class="col-xs-6 text-right" id="confirmCity"><div class="pr10 text-green">&#x786E;&#x5B9A;</div></div></div><div id="city_list" class="selectDiv"></div></div><span class="input-group-addon" id="recommendCityImg"><img src="img/icon_arrow.png" class="img-input2"></span></div><div class="input-group border-green"><span class="input-group-addon text-green text-left"><img src="img/icon_building.png" class="img-input">&#x610F;&#x5411;&#x697C;&#x76D8; |</span> <span id="recommendedBuilding" class="form-control color-999" style="line-height:24px;">&#x5FC5; &#x586B; &#x9879;</span><div id="areaSelect" class="citySelect" style="display:none;"><div class="border-bottom border-top row p10 "><div class="col-xs-6 text-left" id="cancelButton"><div class="pl10">&#x53D6;&#x6D88;</div></div><div class="col-xs-6 text-right" id="submitButton"><div class="pr10 text-green">&#x786E;&#x5B9A;</div></div></div><div id="area_list" class="leftSelectionDiv"></div><div id="building_list" class="rightSelectionDiv"></div></div><span id="recommendedBuildingArrow" class="input-group-addon text-right"><img src="img/icon_arrow.png" class="img-input2"></span></div><div id="recommendedBuilding_error" class="text-danger text-center " style="display:none;"></div><div class="input-group border-green"><span class="input-group-addon text-green"><img src="img/icon_date.png" class="img-input">&#x770B;&#x623F;&#x65E5;&#x671F; |</span><input type="date" placeholder="&#x9009; &#x586B; &#x9879;" class="form-control date-input" name="recommendDate" id="recommendDate"><span class="color-999" id="date_tip">&#x9009; &#x586B; &#x9879;</span> <span class="input-group-addon" id="recommendDateArrow"><img src="img/icon_arrow.png" class="img-input2"></span></div><textarea class="form-control mt15 border" rows="5" placeholder="&#x5907;&#x6CE8;" name="recommendMark" id="recommendMark"></textarea><button class="btn btn-green w100 mt20" type="button" id="submit" name="submit">&#x7ACB;&#x5373;&#x63A8;&#x8350;</button></form><div class="text-center text-gray pt20 pb20 text-nowrap"><div class="center-line"><span>&#x53CB;&#x60C5;&#x63D0;&#x9192;&#xFF1A;&#x53EA;&#x6709;&#x901A;&#x8FC7;&#x5B9E;&#x540D;&#x8BA4;&#x8BC1;&#x624D;&#x80FD;&#x63D0;&#x53D6;&#x4F63;&#x91D1;</span></div></div></div></body></html><script src="js/jquery.js"></script><script src="js/iscroll.js"></script><script src="js/script.js"></script><script>$(document).ready(function(){function e(){var e=$("#clientName").val().trim();return""==e?(hasError=!0,$("#clientName_error").html("客户姓名为必填项").show()):e.length<2||e.length>20?(hasError=!0,$("#clientName_error").html("客户姓名2-20个字符").show()):(hasError=!1,$("#clientName_error").html("").hide()),hasError}function i(){var e=$("#clientPhone").val().trim();return""==e?(hasError=!0,$("#clientPhone_error").html("手机号码为必填项").show()):/^1[3|5|6|8|9][0-9]\d{8,8}$/.test(e)?(hasError=!1,$("#clientPhone_error").html("").hide()):(hasError=!0,$("#clientPhone_error").html("请输入有效的手机号码").show()),hasError}function l(){var e=$("#recommendedBuilding").attr("data-id");return""==e?(hasError=!0,$("#recommendedBuilding_error").html("意向楼盘为必选项").show()):(hasError=!1,$("#recommendedBuilding_error").html("").hide()),hasError}function t(){var t=BrokerWeb;if("undefined"==typeof t.params.login||"0"==t.params.login)return void(window.location.href="ShouldLogin:900950.com");if(!(e()||i()||l()||hasError)){var r={clientName:$("#clientName").val().trim(),clientPhone:$("#clientPhone").val().trim(),recommendedBuilding:$("#recommendedBuilding").attr("data-id"),brokerId:t.brokerid.trim(),recommendMark:$("#recommendMark").val().trim(),recommendCity:$("#recommendCity").html().trim(),bespeakTime:$("#recommendDate").val().trim()},o=$("#recommendDate").val().trim(),n="";o?(n="/broker/rest/broker/beSpeakedClientByBroker",r.bespeakMark=r.recommendMark,delete r.recommendMark):n="/broker/rest/broker/brokerRecommendClient",$.ajax({url:t.apiBaseUrl+n,type:"POST",data:r,dataType:"json",success:function(e){e.result?($("#clientName").val("必 填 项"),$("#clientPhone").val("必 填 项"),$("#recommendedBuilding").html("必 填 项").attr("data-id",""),$("#recommendMark").val(""),$("#recommendDate").val(""),window.location.href="ShowDialog:900950.com?msg=提交成功"):window.location.href="ShowDialog:900950.com?msg="+e.value},error:function(){}})}}function r(){var e=BrokerWeb,i=e.citys;e.area_buildings={};var l="<li></li><li></li><li></li>";e.city_y_index=0,$.each(i,function(i,t){var r="";"undefined"!=typeof e.params.cname&&decodeURIComponent(e.params.cname)==t.name&&(r=' class="selected" ',e.city_y_index=i),l+='<li data-id="'+t.id+'" '+r+">"+t.name+"</li>"}),l+="<li></li><li></li><li></li>",$("#city_list").empty().append($("<ul>").append(l))}function o(){var e=BrokerWeb;$.ajax({url:e.apiBaseUrl+"/broker/sys/getCitys",type:"GET",dataType:"json",success:function(i){i.result&&(e.citys=i.objValue,console.log(e.citys),e.setCityList())},error:function(){}})}function n(e,i){$("#recommendedBuilding").removeClass("color-555").removeClass("color-999").addClass("color-999").html("必 填 项").attr("data-id","");var l=BrokerWeb;$("#recommendCity").removeClass("color-999").removeClass("color-555").addClass("color-555").html(e),$.ajax({url:l.apiBaseUrl+"/broker/sys/getAreaBuildingTree/"+i,type:"POST",dataType:"json",success:function(e){l.areas=e.objValue,l.setArea()},error:function(){}})}function c(){var e=BrokerWeb,i=e.areas;e.area_buildings={};var l='<li></li><li></li><li></li><li data-id="all">不限</li>';e.y_index=0,$.each(i,function(i,t){e.area_buildings[t.id]=t.children;var r="";"undefined"!=typeof e.params.aname&&decodeURIComponent(e.params.aname)==t.text&&(r=' class="selected" ',e.y_index=i),l+='<li data-id="'+t.id+'" '+r+">"+t.text+"</li>"}),l+="<li></li><li></li><li></li>",$("#area_list").empty().append($("<ul>").append(l))}function a(e,i){$("#clientName").val(e),$("#clientPhone").val(i)}function s(){var e=BrokerWeb;$("#recommendDate").focus(function(){$("#date_tip").hide()}).blur(function(){""==$("#recommendDate").val()&&$("#date_tip").show()}),$("#recommendDateArrow").click(function(){$("#recommendDate").focus()}),$("#date_tip").click(function(){$("#recommendDate").focus()}),$("#clientName").on("input blur",e.clientNameBlur),$("#clientPhone").on("input blur",e.clientPhoneBlur),$("#submit").click(e.submitForm),$("#submitButton").click(function(){e.scrollSelection.confirmSelect()}),$("#cancelButton").click(function(){e.scrollSelection.cancelSelect()}),$("#recommendedBuilding").click(function(){e.scrollSelection.loaded()}),$("#recommendMark").focus(function(){location.hash="submit"}),$("#recommendedBuildingArrow").click(function(){e.scrollSelection.loaded()}),$("#confirmCity").click(function(){e.citySelect.confirmSelect()}),$("#cancelCity").click(function(){e.citySelect.cancelSelect()}),$("#recommendCityImg").click(function(){e.citySelect.loaded()}),$("#formTuijian").click(function(i){console.log("e.target=",i),"recommendedBuilding"!=i.target.id&&"INPUT"==i.target.nodeName&&e.scrollSelection.cancelSelect(),"recommendCity"==i.target.id&&(e.scrollSelection.cancelSelect(),e.citySelect.loaded())}),e.getCitys(),"undefined"!=typeof e.params.cid&&"undefined"!=typeof e.params.cname&&e.setCity(decodeURIComponent(e.params.cname),e.params.cid),"undefined"!=typeof e.params.bid&&"undefined"!=typeof e.params.bname&&$("#recommendedBuilding").removeClass("color-999").addClass("color-555").html(decodeURIComponent(e.params.bname)).attr("data-id",e.params.bid),"undefined"!=typeof e.params.clientName&&"undefined"!=typeof e.params.clientPhone&&($("#clientName").val(e.params.clientName),$("#clientPhone").val(e.params.clientPhone))}var d={loaded:function(){$("#citySelect").show();var e=new iScroll("city_list",{checkDOMChanges:!0,hScrollbar:!1,vScrollbar:!1,onScrollEnd:function(){var e=parseInt(Math.abs(this.y)/40),i=parseInt(Math.abs(this.y)%40);console.log("onScrollEnd"),BrokerWeb.citySelect.pullDownAction(e,i)}});setTimeout(function(){document.getElementById("city_list").style.left="0"},800),e.scrollTo(0,-1*BrokerWeb.city_y_index*40,1e3)},pullDownAction:function(e,i){console.log("scrollIndex==",e,";;overflow==",i),i>20?(e+=1,$("#city_list ul").css("margin-top","-"+(40-i)+"px")):$("#city_list ul").css("margin-top",i+"px"),$("#city_list ul li").removeClass("selected"),$("#city_list ul li").each(function(i){e+3==i&&($(this).addClass("selected"),BrokerWeb.city_y_index=0==e?BrokerWeb.city_y_index:e)})},confirmSelect:function(){var e=$("#city_list ul .selected").html(),i=$("#city_list ul .selected").attr("data-id");BrokerWeb.setCity(e,i),$("#citySelect").hide()},cancelSelect:function(){$("#citySelect").hide()}},m={loaded:function(){$("#areaSelect").show(),myScroll=new iScroll("area_list",{checkDOMChanges:!0,hScrollbar:!1,vScrollbar:!1,onScrollEnd:function(){var e=parseInt(Math.abs(this.y)/40),i=parseInt(Math.abs(this.y)%40);BrokerWeb.scrollSelection.pullDownAction(e,i)}}),setTimeout(function(){document.getElementById("area_list").style.left="0"},800),myScroll.scrollTo(0,-1*BrokerWeb.y_index*40,1e3)},scrollDistrict:function(){myScrollDistrict=new iScroll("building_list",{checkDOMChanges:!0,hScrollbar:!1,vScrollbar:!1,onScrollEnd:function(){var e=parseInt(Math.abs(this.y)/40),i=parseInt(Math.abs(this.y)%40);BrokerWeb.scrollSelection.pullDownActionDistrict(e,i)}}),setTimeout(function(){document.getElementById("building_list").style.left="0"},800),myScrollDistrict.scrollTo(0,40*BrokerWeb.y_index_b*-1)},pullDownAction:function(e,i){console.log("area scrollIndex==",e,";;overflow==",i),i>20?(e+=1,$("#area_list ul").css("margin-top","-"+(40-i)+"px")):$("#area_list ul").css("margin-top",i+"px"),$("#area_list ul li").removeClass("selected"),$("#area_list ul li").each(function(i){if(e+3==i){$(this).addClass("selected");var l=$(this).attr("data-id");BrokerWeb.scrollSelection.loadDistrict(l)}})},pullDownActionDistrict:function(e,i){i>20?(e+=1,$("#building_list ul").css("margin-top","-"+(40-i)+"px")):$("#building_list ul").css("margin-top",i+"px"),$("#building_list ul li").removeClass("selected"),$("#building_list ul li").each(function(i){if(e+3==i){$(this).addClass("selected");$(this).html()}})},loadDistrict:function(e){var i=BrokerWeb.area_buildings,l="<li></li><li></li><li></li>";BrokerWeb.y_index_b=0,"all"==e&&$.each(i,function(e,i){i.length>0&&$.each(i,function(e,i){l+='<li data-id="'+i.id+'">'+i.text+"</li>"})}),"undefined"!=typeof i[e]&&i[e].length>0&&$.each(i[e],function(e,i){var t="";"undefined"!=typeof BrokerWeb.params.bid&&BrokerWeb.params.bid==i.id&&(t="selected",BrokerWeb.y_index_b=e),l+='<li data-id="'+i.id+'" class="'+t+'">'+i.text+"</li>"}),l+="<li></li><li></li><li></li>",$("#building_list").empty().append($("<ul>").append(l)),BrokerWeb.scrollSelection.scrollDistrict()},confirmSelect:function(){var e=$("#building_list ul .selected").html(),i=$("#building_list ul .selected").attr("data-id");"undefined"==typeof i?$("#recommendedBuilding").html("必 填 项").removeClass("color-555").removeClass("color-999").addClass("color-999").attr("data-id",""):$("#recommendedBuilding").html(e).removeClass("color-999").removeClass("color-555").addClass("color-555").attr("data-id",i),$("#areaSelect").hide()},cancelSelect:function(){$("#areaSelect").hide()}};$.extend(BrokerWeb,{hasError:!1,clientNameBlur:e,clientPhoneBlur:i,recommendedBuildingBlur:l,submitForm:t,setFromContact:a,setCity:n,setArea:c,scrollSelection:m,getCitys:o,citySelect:d,setCityList:r}),BrokerWeb.init(s)});</script>