<!doctype html><html><head><meta charset="UTF-8"><title>&#x63A8;&#x8350;</title><meta content="yes" name="apple-mobile-web-app-capable"><meta name="viewport" content="width=device-width,inital-scale=1.0,maximum-scale=1.0,user-scalable=no"><link href="css/bootstrap.css" rel="stylesheet" type="text/css"><link href="css/test.css" rel="stylesheet" type="text/css"><link href="css/theme.css?_=111" rel="stylesheet" type="text/css"></head><body style="background-color:#fff;"><div class="container-fluid "><form class="tuijian"><div class="input-group"><span class="input-group-addon text-orange"><img src="img/icon_name.png" class="img-input">&#x5BA2;&#x6237;&#x59D3;&#x540D; |</span><input type="text" class="form-control" aria-label="" placeholder="&#x5FC5; &#x586B; &#x9879;" name="clientName" id="clientName" max-length="20"><span class="input-group-addon"><a href="XCFCAddress:900950.com"><img src="img/icon_book.png" class="img-input1"></a></span></div><div id="clientName_error" class="text-danger text-center " style="display:none;"></div><div class="input-group"><span class="input-group-addon text-orange"><img src="img/icon_phone.png" class="img-input">&#x624B;&#x673A;&#x53F7;&#x7801; |</span><input type="number" class="form-control" aria-label="" placeholder="&#x5FC5; &#x586B; &#x9879;" name="clientPhone" id="clientPhone"><span class="input-group-addon">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;</span></div><div id="clientPhone_error" class="text-danger text-center " style="display:none;"></div><div class="input-group border-green"><span class="input-group-addon text-green"><img src="img/icon_city.png" class="img-input">&#x610F;&#x5411;&#x57CE;&#x5E02; |</span> <a href="XCFCCity:900950.com" class="form-control want-city" id="recommendCity">&#x5FC5; &#x586B; &#x9879;</a> <span class="input-group-addon"><img src="img/icon_arrow.png" class="img-input2"></span></div><div class="input-group border-green"><span class="input-group-addon text-green text-left"><img src="img/icon_building.png" class="img-input">&#x610F;&#x5411;&#x697C;&#x76D8; |</span> <span id="recommendedBuilding" class="form-control color-999" style="line-height:24px;">&#x5FC5; &#x586B; &#x9879;</span><div id="citySelect" style="display:none;"><div class="border-bottom border-top row p10"><div class="col-xs-6 text-left" id="cancelButton">&#x53D6;&#x6D88;</div><div class="col-xs-6 text-right" id="submitButton">&#x786E;&#x5B9A;</div></div><div id="area_list" class="leftSelectionDiv"></div><div id="building_list" class="rightSelectionDiv"></div></div><span class="input-group-addon text-right"><img src="img/icon_arrow.png" class="img-input2"></span></div><div id="recommendedBuilding_error" class="text-danger text-center " style="display:none;"></div><div class="input-group border-green"><span class="input-group-addon text-green"><img src="img/icon_date.png" class="img-input">&#x770B;&#x623F;&#x65E5;&#x671F; |</span><input type="date" class="form-control date-input" aria-label="" name="recommendDate" id="recommendDate"><span class="input-group-addon"><img src="img/icon_arrow.png" class="img-input2"></span></div><textarea class="form-control mt15 border" rows="5" placeholder="&#x5907;&#x6CE8;" name="recommendMark" id="recommendMark"></textarea><button class="btn btn-green w100 mt20" type="button" id="submit">&#x7ACB;&#x5373;&#x63A8;&#x8350;</button></form><div class="text-center text-gray pt20 pb20 text-nowrap"><div class="center-line"><span>&#x53CB;&#x60C5;&#x63D0;&#x9192;&#xFF1A;&#x53EA;&#x6709;&#x901A;&#x8FC7;&#x5B9E;&#x540D;&#x8BA4;&#x8BC1;&#x624D;&#x80FD;&#x63D0;&#x53D6;&#x4F63;&#x91D1;</span></div></div></div></body></html><script src="js/jquery.js"></script><script src="js/iscroll.js"></script><script src="js/script.js"></script><script>$(document).ready(function(){function e(){var e=$("#clientName").val();return""==e?(hasError=!0,$("#clientName_error").html("客户姓名为必填项").show()):e.length<2||e.length>20?(hasError=!0,$("#clientName_error").html("客户姓名2-20个字符").show()):(hasError=!1,$("#clientName_error").html("").hide()),hasError}function i(){var e=$("#clientPhone").val();return""==e?(hasError=!0,$("#clientPhone_error").html("手机号码为必填项").show()):/^1[3|5|6|8|9][0-9]\d{4,8}$/.test(e)?(hasError=!1,$("#clientPhone_error").html("").hide()):(hasError=!0,$("#clientPhone_error").html("请输入有效的手机号码").show()),hasError}function l(){var e=$("#recommendedBuilding").attr("data-id");return""==e?(hasError=!0,$("#recommendedBuilding_error").html("意向楼盘为必选项").show()):(hasError=!1,$("#recommendedBuilding_error").html("").hide()),hasError}function t(){if(_this=BrokerWeb,!(e()||i()||l()||hasError)){var t={clientName:$("#clientName").val(),clientPhone:$("#clientPhone").val(),recommendedBuilding:$("#recommendedBuilding").attr("data-id"),brokerId:_this.brokerid,recommendMark:$("#recommendMark").val(),recommendCity:$("#recommendCity").html(),recommendDate:$("#recommendDate").val()};console.log("data",t),$.ajax({url:_this.apiBaseUrl+"/broker/rest/broker/brokerRecommendClient",type:"POST",data:t,dataType:"json",success:function(e){e.result&&(alert("提交成功"),window.location.reload())},error:function(){}})}}function r(e,i){$("#recommendCity").removeClass("color-555").addClass("color-555").html(e),$.ajax({url:_this.apiBaseUrl+"/broker/sys/getAreaBuildingTree/"+i,type:"POST",dataType:"json",success:function(e){console.log("成功",e),_this.areas=e.objValue,_this.setArea()},error:function(){}})}function o(){var e=BrokerWeb,i=e.areas;e.area_buildings={};var l="<li></li><li></li><li></li>";$("#area_list").html(""),e.y_index=0,$.each(i,function(i,t){e.area_buildings[t.id]=t.children;var r="";"undefined"!=typeof e.params.aname&&decodeURIComponent(e.params.aname)==t.text&&(r=' class="selected" ',e.y_index=i,console.log("i==",i,e.y_index)),l+='<li data-id="'+t.id+'" '+r+">"+t.text+"</li>"}),l+="<li></li><li></li><li></li>",$("#area_list").append($("<ul>").append(l))}function n(e,i){$("#clientName").val(e),$("#clientPhone").val(i)}function a(){_this=BrokerWeb,$("#clientName").on("input blur",_this.clientNameBlur),$("#clientPhone").on("input blur",_this.clientPhoneBlur),$("#submit").click(_this.submitForm),$("#submitButton").click(function(){_this.scrollSelection.confirmSelect()}),$("#cancelButton").click(function(){_this.scrollSelection.cancelSelect()}),$("#recommendedBuilding").click(function(){_this.scrollSelection.loaded()}),"undefined"!=typeof _this.params.cid&&"undefined"!=typeof _this.params.cname&&_this.setCity(decodeURIComponent(_this.params.cname),_this.params.cid),"undefined"!=typeof _this.params.bid&&"undefined"!=typeof _this.params.bname&&$("#recommendedBuilding").removeClass("color-999").addClass("color-555").html(decodeURIComponent(_this.params.bname)).attr("data-id",_this.params.bid)}var s={loaded:function(){$("#citySelect").show(),myScroll=new iScroll("area_list",{checkDOMChanges:!0,hScrollbar:!1,vScrollbar:!1,onScrollEnd:function(){var e=parseInt(Math.abs(this.y)/40),i=parseInt(Math.abs(this.y)%40);console.log("this.y",this.y),BrokerWeb.scrollSelection.pullDownAction(e,i)}}),setTimeout(function(){document.getElementById("area_list").style.left="0"},800),myScroll.scrollTo(0,-1*BrokerWeb.y_index*40,1e3)},scrollDistrict:function(){myScrollDistrict=new iScroll("building_list",{checkDOMChanges:!0,hScrollbar:!1,vScrollbar:!1,onScrollEnd:function(){var e=parseInt(Math.abs(this.y)/40),i=parseInt(Math.abs(this.y)%40);BrokerWeb.scrollSelection.pullDownActionDistrict(e,i)}}),setTimeout(function(){document.getElementById("building_list").style.left="0"},800),myScrollDistrict.scrollTo(0,40*BrokerWeb.y_index_b*-1)},pullDownAction:function(e,i){i>20?(e+=1,$("#area_list ul").css("margin-top","-"+(40-i)+"px")):$("#area_list ul").css("margin-top",i+"px"),$("#area_list ul li").removeClass("selected"),$("#area_list ul li").each(function(i){if(e+3==i){$(this).addClass("selected");var l=$(this).attr("data-id");BrokerWeb.scrollSelection.loadDistrict(l)}})},pullDownActionDistrict:function(e,i){i>20?(e+=1,$("#building_list ul").css("margin-top","-"+(40-i)+"px")):$("#building_list ul").css("margin-top",i+"px"),$("#building_list ul li").removeClass("selected"),$("#building_list ul li").each(function(i){if(e+3==i){$(this).addClass("selected");$(this).html()}})},loadDistrict:function(e){var i=BrokerWeb.area_buildings,l="<li></li><li></li><li></li>";BrokerWeb.y_index_b=0,i[e].length>0&&$.each(i[e],function(e,i){var t="";"undefined"!=typeof _this.params.bid&&_this.params.bid==i.id&&(t="selected",BrokerWeb.y_index_b=e),l+='<li data-id="'+i.id+'" class="'+t+'">'+i.text+"</li>"}),l+="<li></li><li></li><li></li>",$("#building_list").empty().append($("<ul>").append(l)),BrokerWeb.scrollSelection.scrollDistrict()},confirmSelect:function(){var e=$("#building_list ul .selected").html(),i=$("#building_list ul .selected").attr("data-id");console.log("bd,bdid==",e,i),"undefined"==typeof i?$("#recommendedBuilding").html("必 填 项").removeClass("color-555").removeClass("color-999").addClass("color-999").attr("data-id",""):$("#recommendedBuilding").html(e).removeClass("color-999").removeClass("color-555").addClass("color-555").attr("data-id",i),$("#citySelect").hide()},cancelSelect:function(){$("#citySelect").hide()}};$.extend(BrokerWeb,{hasError:!1,clientNameBlur:e,clientPhoneBlur:i,recommendedBuildingBlur:l,submitForm:t,setFromContact:n,setCity:r,setArea:o,scrollSelection:s}),BrokerWeb.init(a)});</script>