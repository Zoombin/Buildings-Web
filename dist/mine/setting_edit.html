<!DOCTYPE html><html><head><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1"><meta name="keywords" content=""><meta name="description" content=" "><meta charset="utf-8"><link href="../css/bootstrap.css" rel="stylesheet"><link href="../css/theme.css" rel="stylesheet"></head><body><div class="container-fluid" id="container"><div class="row bg-space"></div><div class="row bg-line goto" id="nickname_div" style="display:none;"><div class="col-xs-12"><img src="../img/my_ico_nickname.png" class="img-line"><input type="text" name="nickname" id="nickname" placeholder="&#x6635;&#x79F0;"><div id="nickname_error" style="display:none;" class="text-danger text-center"></div></div></div><div id="password_div" style="display:none;"><div class="row bg-line goto"><div class="col-xs-12"><img src="../img/my_ico_password.png" class="img-line"><input type="text" name="oldpwd" id="oldpwd" placeholder="&#x8BF7;&#x8F93;&#x5165;&#x539F;&#x5BC6;&#x7801;"><div id="oldpwd_error" style="display:none;" class="text-danger text-center"></div></div></div><div class="row bg-line goto"><div class="col-xs-12"><img src="../img/my_ico_password.png" class="img-line"><input type="text" name="newpwd" id="newpwd" placeholder="&#x8BF7;&#x8F93;&#x5165;&#x65B0;&#x5BC6;&#x7801;"><div id="newpwd_error" style="display:none;" class="text-danger text-center"></div></div></div><div class="row bg-line goto"><div class="col-xs-12"><img src="../img/my_ico_password.png" class="img-line"><input type="text" name="newpwd2" id="newpwd2" placeholder="&#x8BF7;&#x91CD;&#x590D;&#x8F93;&#x5165;&#x65B0;&#x5BC6;&#x7801;"><div id="newpwd2_error" style="display:none;" class="text-danger text-center"></div></div></div></div><div class="row bg-space-big"></div><div class="row bg-line" id="done"><div class="text-green text-center text-big" id="submit">&#x5B8C;&#x6210;</div></div></div></body></html><script src="../js/jquery.js"></script><script src="../js/script.js"></script><script>$(document).ready(function(){function e(){var e=$("#oldpwd").val();return""==e?($("#oldpwd_error").html("旧密码不能为空").show(),!1):e.length<6||e.length>20?($("#oldpwd_error").html("旧密码长度为6-20个字符").show(),!1):($("#oldpwd_error").html("").hide(),!0)}function r(){var e=$("#newpwd").val();return""==e?($("#newpwd_error").html("新密码不能为空").show(),!1):e.length<6||e.length>20?($("#newpwd_error").html("新密码长度为6-20个字符").show(),!1):($("#newpwd_error").html("").hide(),!0)}function o(){var e=$("#newpwd").val(),r=$("#newpwd2").val();return console.log(e,r),""==r?($("#newpwd2_error").html("重复密码不能为空").show(),!1):r.length<6||r.length>20?($("#newpwd2_error").html("重复密码长度为6-20个字符").show(),!1):e!==r?(console.log(1111),$("#newpwd2_error").html("两次密码不一致").show(),!1):($("#newpwd2_error").html("").hide(),!0)}function n(){_this=BrokerWeb,_this.checkOldPassword()&&_this.checkNewPassword()&&_this.checkDupPassword()&&$.ajax({url:_this.apiBaseUrl+"/broker/rest/broker/updatePassword",type:"POST",data:{username:_this.phone,oldpassword:$("#oldpwd").val(),newpassword:$("#newpwd").val()},dataType:"json",success:function(){console.log(data),data.result&&alert(data.result.value)},error:function(){}})}function t(){var e=$("#nickname").val();return""==e?($("#nickname_error").html("昵称不能为空").show(),!1):e.length<2||e.length>20?($("#nickname_error").html("昵称长度为2-20个字符").show(),!1):($("#nickname_error").html("").hide(),!0)}function s(){if(_this=BrokerWeb,_this.checkNickname()){var e={id:_this.brokerid,name:$("#nickname").val()};$.ajax({url:_this.apiBaseUrl+"/broker/rest/broker/updateBroker",type:"POST",data:e,dataType:"json",success:function(e){console.log(e),e.result&&alert(e.result.value)},error:function(){}})}}function a(e,r){_this=BrokerWeb;var o=_this.getParams();$("#"+o.a+"_div").show(),"nickname"==o.a?($("#nickname").on("input blur",_this.checkNickname),$("#submit").click(_this.updateNickname)):"password"==o.a&&($("#oldpwd").on("input blur",_this.checkOldPassword),$("#newpwd").on("input blur",_this.checkNewPassword),$("#newpwd2").on("input blur",_this.checkDupPassword),$("#submit").click(_this.updatePassword))}$.extend(BrokerWeb,{checkNickname:t,updateNickname:s,checkDupPassword:o,checkNewPassword:r,checkOldPassword:e,updatePassword:n}),BrokerWeb.init(a)});</script>