<!DOCTYPE html><html><head><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1"><meta name="keywords" content=""><meta name="description" content=" "><meta charset="utf-8"><link href="../css/bootstrap.css" rel="stylesheet"><link href="../css/theme.css" rel="stylesheet"></head><body><div class="container-fluid" id="container"><div class="row bg-space"></div><div class="row bg-line goto" id="nickname_div" style="display:none;"><div class="col-xs-12"><img src="../img/my_ico_nickname.png" class="img-pwd"><input type="text" name="nickname" id="nickname" placeholder="&#x6635;&#x79F0;"><div id="nickname_error" style="display:none;" class="text-danger text-center"></div></div></div><div id="password_div" style="display:none;"><div class="row bg-line goto"><div class="col-xs-12"><img src="../img/setting_pwd.png" class="img-pwd"><input type="password" name="oldpwd" id="oldpwd" placeholder="&#x8BF7;&#x8F93;&#x5165;&#x539F;&#x5BC6;&#x7801;"><div id="oldpwd_error" style="display:none;" class="text-danger text-center"></div></div></div><div class="row bg-line goto"><div class="col-xs-12"><img src="../img/setting_pwd.png" class="img-pwd"><input type="password" name="newpwd" id="newpwd" placeholder="&#x8BF7;&#x8F93;&#x5165;&#x65B0;&#x5BC6;&#x7801;"><div id="newpwd_error" style="display:none;" class="text-danger text-center"></div></div></div><div class="row bg-line goto"><div class="col-xs-12"><img src="../img/setting_pwd_re.png" class="img-pwd"><input type="password" name="newpwd2" id="newpwd2" placeholder="&#x8BF7;&#x91CD;&#x590D;&#x8F93;&#x5165;&#x65B0;&#x5BC6;&#x7801;"><div id="newpwd2_error" style="display:none;" class="text-danger text-center"></div></div></div></div><div class="row bg-space-big"></div><div class="row bg-line" id="done"><div class="text-green text-center text-big" id="submit">&#x5B8C;&#x6210;</div></div></div></body></html><script src="../js/jquery.js"></script><script src="../js/script.js"></script><script>$(document).ready(function(){function e(){var e=$("#oldpwd").val().trim();return""==e?($("#oldpwd_error").html("旧密码不能为空").show(),!1):($("#oldpwd_error").html("").hide(),!0)}function r(){var e=$("#newpwd").val().trim();return""==e?($("#newpwd_error").html("新密码不能为空").show(),!1):e.length<6||e.length>20?($("#newpwd_error").html("新密码长度为6-20个字符").show(),!1):($("#newpwd_error").html("").hide(),!0)}function n(){var e=$("#newpwd").val().trim(),r=$("#newpwd2").val().trim();return console.log(e,r),""==r?($("#newpwd2_error").html("重复密码不能为空").show(),!1):e!==r?(console.log(1111),$("#newpwd2_error").html("两次密码不一致").show(),!1):($("#newpwd2_error").html("").hide(),!0)}function o(){_this=BrokerWeb,_this.checkOldPassword()&&_this.checkNewPassword()&&_this.checkDupPassword()&&$.ajax({url:_this.apiBaseUrl+"/broker/rest/broker/updatePassword",type:"POST",data:{username:_this.params.tel,oldpassword:$("#oldpwd").val(),newpassword:$("#newpwd").val()},dataType:"json",success:function(e){e.result?alert(e.value):alert(e.value)},error:function(){}})}function t(e){$("#nickname").val(e)}function a(){var e=$("#nickname").val();return""==e?($("#nickname_error").html("昵称不能为空").show(),!1):e.length<2||e.length>20?($("#nickname_error").html("昵称长度为2-20个字符").show(),!1):($("#nickname_error").html("").hide(),!0)}function i(){if(_this=BrokerWeb,_this.checkNickname()){var e={id:_this.brokerid,name:$("#nickname").val()};$.ajax({url:_this.apiBaseUrl+"/broker/rest/broker/updateBroker",type:"POST",data:e,dataType:"json",success:function(e){console.log(e),e.result&&(alert(e.value),window.location.href="setting.html?id="+_this.brokerid+"&login="+_this.params.login)},error:function(){}})}}function s(e,r){_this=BrokerWeb,("undefined"==typeof _this.params.login||"0"==_this.params.login)&&(window.location.href="ShouldLogin:900950.com");var n=_this.getParams();$("#"+n.a+"_div").show(),"nickname"==n.a?($("#nickname").on("input blur",_this.checkNickname),$("#submit").click(_this.updateNickname),n.nickname&&t(n.nickname)):"password"==n.a&&($("#oldpwd").on("input blur",_this.checkOldPassword),$("#newpwd").on("input blur",_this.checkNewPassword),$("#newpwd2").on("input blur",_this.checkDupPassword),$("#submit").click(_this.updatePassword))}$.extend(BrokerWeb,{setNickname:t,checkNickname:a,updateNickname:i,checkDupPassword:n,checkNewPassword:r,checkOldPassword:e,updatePassword:o}),BrokerWeb.init(s)});</script>