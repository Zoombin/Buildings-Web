<!DOCTYPE html><html><head><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1"><meta name="keywords" content=""><meta name="description" content=" "><meta charset="utf-8"><link href="../css/bootstrap.css" rel="stylesheet"><link href="../css/onepage-scroll.css" rel="stylesheet"><link href="../css/theme.css" rel="stylesheet"></head><body><div class="container-fluid" id="container"></div></body></html><script src="../js/jquery.js"></script><script src="../js/jquery.onepage-scroll.js" =""=""></script><script src="../js/script.js"></script><script>$(document).ready(function(){function e(e){var t=BrokerWeb,n={clientName:t.customer.client.name,clientPhone:t.customer.client.phone,recommendedBuilding:e.buildingId,brokerId:e.brokerId},a="/broker/rest/broker/brokerRecommendClient";$.ajax({url:t.apiBaseUrl+a,type:"POST",data:n,dataType:"json",success:function(e){e.result?alert(e.value):alert(e.value)},error:function(){}})}function t(){$("#container").onepage_scroll({direction:"horizontal"})}function n(e){var t=BrokerWeb,n=t.customer.client,a=$('<div class="row text-center bg-user m0"></div>').append($('<div class="col-xs-8 text-left pr0"></div>').append($('<div class="pt20 pb20"></div>').append($("<div></div>").append($('<span class="text-mid text-333" id="name"></span>').html(n.name)).append($('<img src="" class="img-line-mid" id="photosrc" />').attr("src","../img/account_ico_"+("null"!=n.gender&&n.gender?"male":"female")+".png")).append($('<span class="text-green" id="phone"></span>').html(n.phone))).append($('<div class="text-666 lh-mid mt5" ></div>').append($("<div>推荐购买：</div>").append($("<span></span>").html(e.buildingName))).append($("<div>平均佣金：</div>").append($("<span></span>").html(e.buildingRatio))).append($("<div>有效期：</div>").append($("<span></span>").html(e.protectTime?t.getLeftTime(e.protectTime):"")).append($('<span class="label label-green ml5 re-push">重新推荐</span>').click(function(){BrokerWeb.rePush(e)})))))).append($('<div class="col-xs-4 pr0 pt20 pb20"></div>').append(e.isSigned?$('<div class="customer-right mb10"></div>').append($('<div class="right-ok fs11"></div>').html(t.clientStatus[e.clientStatus])):"").append(e.isLocked?$('<div class="customer-right"></div>').append($('<div class="important-on fs11">重要客户</div>')):"")),s=e.historys,i=$('<ul class="cust-stat list-unstyled"></ul>');return $.each(s,function(e,n){i.append($('<li class="bg-white mt15"></li>').append($('<div class="point"></div>').addClass(0==e?"active":"")).append(s.length>1?$('<div class="line"></div>'):"").append($('<div class="row"></div>').append($('<div class="col-xs-2 "></div>')).append($('<div class="col-xs-10"></div>').append($('<div class="stat-wraper"></div>').append($('<span class="text-mid" id="status">').html(t.statuses[n.clientStatus])).append($('<span class="date pull-right" id="time">').html(n.createTime))).append($('<div class="text-gray2 p5" id="remark">备注：</div>').append($("<span></span>").html(n.remark?n.remark:"无"))))))}),$("<section></section>").append(a).append(i)}function a(){var e=BrokerWeb;e.customer.client;$.each(e.customer.clientBuildingRelations,function(t,n){console.log(t,"i"),$("#container").append(e.setCustomerInfoItem(n))}),e.bindScroll()}function s(e){return e}function i(){var e=BrokerWeb;$.ajax({url:e.apiBaseUrl+"/broker/rest/broker/getBrokerClientinfo",type:"GET",dataType:"json",data:{brokerId:e.brokerid,clientId:e.params.clientId,state:e.params.state},success:function(t){console.log(t),t.result?(e.customer=t.objValue,e.setCustomerInfoList()):alert("获取信息失败")},error:function(){}})}function r(){var e=BrokerWeb;("undefined"==typeof e.params.login||"0"==e.params.login)&&(window.location.href="ShouldLogin:900950.com"),e.clientStatus={20:"可预约",30:"已预约未验证",40:"已预约",50:"已看房",60:"看房已复核",70:"已成交",100:"成交复核"},e.statuses={10:"推荐确认",30:"推荐确认",20:"推荐成功",40:"推荐成功",50:"推荐成功",60:"看房成功",70:"看房成功",100:"销售成功"},e.getCustomerInfo()}$.extend(BrokerWeb,{getCustomerInfo:i,setCustomerInfoList:a,setCustomerInfoItem:n,bindScroll:t,getLeftTime:s,rePush:e}),BrokerWeb.init(r)});</script>