<!DOCTYPE html>
<html>
<head >
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1" />
    <meta name="keywords" content="" />
    <meta name="description" content=" "/>
    <meta charset="utf-8">
    <link href="../css/bootstrap.css" rel="stylesheet">
    <link href="../css/theme.css" rel="stylesheet">

</head>
<body>

<!--container -->
<div class="container-fluid" id="container">

    <!-- 头像部分// -->
    <div class="row text-center bg-user"  id="top">
        <div class="col-xs-8 text-left pr0">
            <div class="pt20 pb20">
                <div class="">
                    <span class="text-mid text-333" id="name"></span>
                    <img src="" class="img-line-mid" id="photosrc" />
                    <span class="text-green" id="phone"></span>
                </div> 
                <div class="text-666 lh-mid mt5" >
                    <div>推荐购买：新城金隽</div>
                    <div>平均佣金：成交价1%</div>
                    <div>剩余有效期：已过期<span class="label label-green ml5">重新推荐</span></div>
                </div>
            </div>
        </div>
        <div class="col-xs-4 pr0 pt20 pb20">
            <div class="customer-right mb10 "><div class="right-ok">已成交</div></div>
            <div class="customer-right "><div class="important-on">重要客户</div></div>
        </div>

    </div>
    <!-- //头像部分 -->
    <!-- 内容部分// -->
    <ul class="cust-stat list-unstyled">

        <li class="bg-white mt15">
        <div class="point"></div> 
            <div class="row">
                <div class="col-xs-2"></div>
                <div class="col-xs-10">
                    <div class="stat-wraper">
                        <span class="text-mid">已成交</span>
                        <span class="date pull-right">2014-12-22</span>
                    </div>
                    <div class="text-gray2 p5">备注：无</div>
                </div>
            </div>
        </li>

        <li class="bg-white mt15">
        <div class="point"></div> 
            <div class="row">
                <div class="col-xs-2"></div>
                <div class="col-xs-10">
                    <div class="stat-wraper">
                        <span class="text-mid">已成交</span>
                        <span class="date pull-right">2014-12-22</span>
                    </div>
                    <div class="text-gray2 p5">备注：无</div>
                </div>
            </div>
        </li>

        <li class="bg-white mt15">
        <div class="point"></div> 
            <div class="row">
                <div class="col-xs-2"></div>
                <div class="col-xs-10">
                    <div class="stat-wraper">
                        <span class="text-mid">已成交</span>
                        <span class="date pull-right">2014-12-22</span>
                    </div>
                    <div class="text-gray2 p5">备注：无</div>
                </div>
            </div>
        </li>

        <li class="bg-white mt15">
        <div class="point"></div> 
            <div class="row">
                <div class="col-xs-2"></div>
                <div class="col-xs-10">
                    <div class="stat-wraper">
                        <span class="text-mid">已成交</span>
                        <span class="date pull-right">2014-12-22</span>
                    </div>
                    <div class="text-gray2 p5">备注：无</div>
                </div>
            </div>
        </li>



        <li class="bg-white mt15">
        <div class="point"></div> 
            <div class="row">
                <div class="col-xs-2"></div>
                <div class="col-xs-10">
                    <div class="stat-wraper">
                        <span class="text-mid">已成交</span>
                        <span class="date pull-right">2014-12-22</span>
                    </div>
                    <div class="text-gray2 p5">备注：无</div>
                </div>
            </div>
        </li>

        <li class="bg-white mt15">
        <div class="point"></div> 
            <div class="row">
                <div class="col-xs-2"></div>
                <div class="col-xs-10">
                    <div class="stat-wraper">
                        <span class="text-mid">已成交</span>
                        <span class="date pull-right">2014-12-22</span>
                    </div>
                    <div class="text-gray2 p5">备注：无</div>
                </div>
            </div>
        </li>


    </ul>

    <!-- //内容部分 -->



</div>
<!-- //container -->


</body>
</html>

<script src="../js/jquery.js"></script>
<script src="../js/script.js"></script>

<script>
$(document).ready(function(){

//设置信息
function setCustomerInfo(){
    var _this = BrokerWeb;
    console.log('customer',_this.customer);

    var client = _this.customer.client;

    //客户姓名
    $("#name").html(client.name);

    //客户性别
    $("#photosrc").attr('src', '../img/account_ico_' + (client.gender!='null' && client.gender ? 'male' : 'female') + '.png');
   
    //客户电话
    $("#phone").html(client.phone);


}

//获取经纪人信息
function getCustomerInfo(){
    var _this = BrokerWeb;
    $.ajax({
        url: _this.apiBaseUrl + '/broker/rest/broker/getBrokerClientinfo',
        type: 'GET',
        dataType: 'json',
        data: {
            brokerId: _this.brokerid,
            clientId: _this.params.clientId,
            state: _this.params.state
        },
        success: function(data){
            console.log(data);
            if(data.result){
                _this.customer = data.objValue;
                
                _this.setCustomerInfo();


            }else{
                alert('获取信息失败');
            }

        },
        error: function(){
            //提交出错
        }

    });
}

function main(){
    var _this = BrokerWeb;

    //获取信息
    _this.getCustomerInfo();

}

$.extend(BrokerWeb, {
    getCustomerInfo: getCustomerInfo,
    setCustomerInfo: setCustomerInfo
});

//主函数入口
//参数为main函数
BrokerWeb.init(main);

});

</script>

